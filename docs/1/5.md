#### 计算机网络的体系结构

> 这块是重难点，抽象概念较多，要多思考

##### 为什么要对计算机网络的体系结构进行「分层」？

- 通常，一个庞大而复杂的问题，若能被拆解转化成若干较小的局部问题，就会变得便于研究和处理

- 恰巧，计算机网络是一个庞大而又复杂的系统

- 所以，我们要对计算机网络的体系结构进行分层

##### 分析计算机网络面临的问题，思考层次的划分方式

> 先来看最简单的情况：将两台计算机连接起来

<img src="https://gitee.com/pj-l/imgs-1/raw/master/image-20220306160640842.png" alt="image-20220306160640842" style="zoom: 44%;" />

**我们应该用什么作为传输介质呢 ？**

- 可以使用双绞线网线

- 注意：严格来说，传输介质并不包含于计算机网络的体系结构之中

<img src="https://gitee.com/pj-l/imgs-1/raw/master/image-20220306161034363.png" alt="image-20220306161034363" style="zoom: 50%;" />

**计算机上应该使用哪种物理接口来连接传输介质呢 ？**

- 可以使用 RJ45 以太网接口

<img src="https://gitee.com/pj-l/imgs-1/raw/master/image-20220306161324333.png" alt="image-20220306161324333" style="zoom: 60%;" />

**我们应该使用什么样的信号来表示比特 0 和 1 呢 ？**

- 为了便于理解，可以想成方波信号，可以用低电平表示比特 0，可以用高电平表示比特 1，但其实计算机网络中传输的信号，并不是方波信号

<img src="https://gitee.com/pj-l/imgs-1/raw/master/image-20220306161855588.png" alt="image-20220306161855588" style="zoom: 50%;" />

> 上述这些问题，可以被划分到「物理层」，解决了上述这些问题，主机间就可以发送信号来传输比特 0 和 1 了

<img src="https://gitee.com/pj-l/imgs-1/raw/master/image-20220306162059520.png" alt="image-20220306162059520" style="zoom: 44%;" />

---

> 假设我们已经解决了物理层的问题，即主机间可以发送信号来传输比特 0 和 1 了
> 
> 但实用的计算机网络，一般都由多台主机组成，比如下图的总线型网络

<img src="https://gitee.com/pj-l/imgs-1/raw/master/image-20220306162838823.png" alt="image-20220306162838823" style="zoom: 33%;" />

- 假设主机 A 要给主机 C 发送数据，但表示数据的信号会通过总线发送给总线上的每一台主机，那么主机 C 该如何才能知道该数据是发给自己的呢 ？其他主机又如何才能知道该数据不是发给自己的呢 ？

这就引出了**如何标识网络中各主机**的问题，也就是主机编址问题

- 其实网卡的「MAC地址」就是主机在网络中的地址

- 主机在发送数据时，应给数据附加上目的地址，当其它主机收到后，根据目的地址和自身地址，就能知道该数据是不是发给自己的，也就能决定是否接受该数据

**那么目的主机是如何从信号所表示的一连串比特流中区分出地址和数据的呢 ？**，也就是分组的封装格式问题

- 其次，虽然总线型网络已经淘汰；但对于总线型网络，若主机 B 和 D 同时向总线发送数据，就必然会导致信号碰撞；因此**总线型网络应考虑协调各主机争用总线的问题**

<img src="https://gitee.com/pj-l/imgs-1/raw/master/image-20220306164417727.png" alt="image-20220306164417727" style="zoom:50%;" />

> 其实现在（2022）常用的方式是：使用交换机将多台主机互连形成的交换式以太网

那么**以太网交换机是如何实现的呢 ？**

> 上述这些问题，可以被划分到「数据链路层」
> 
> 解决了（物理层 & 数据链路层）所面临的这些问题，我们就实现了让分组在一个网络上进行传输

---

> 但因特网是由非常多的网络和路由器互连而成的，仅解决上述问题还是不够的，以下图因特网的一部分为例

<img src="https://gitee.com/pj-l/imgs-1/raw/master/image-20220306165443444.png" alt="image-20220306165443444" style="zoom:50%;" />

- 在本例中，由于有多个网络，所以我们**需要标识各网络以及各网络中的主机**，也就是网络和主机共同编址的问题

- 我们都听过 IP 地址，比如下图就标明了网络 N1 中各设备的 IP 地址

<img src="https://gitee.com/pj-l/imgs-1/raw/master/image-20220306165931990.png" alt="image-20220306165931990" style="zoom:50%;" />

- 这类 IP 地址的前 3 个十进制数是用来标识网络的，第 4 个十进制数是用来标识主机的

	- 网络 N1 的网络号为 192.168.1

	- 所以，该网络上的（笔记本电脑、服务器、路由器接口）的 IP 地址的前 3 个数都应该是 192.168.1

	- 而该网络上的（笔记本电脑、服务器、路由器接口）的 IP 地址的第 4 个十进制数是用来标识它们自己的，应各不相同

- 其次，源主机和目的主机之间的传输路径往往很多（不止一条），分组从源主机到目的主机可以走不同的路径

- 如此就引出了**路由器应该如何转发分组，如何进行路由的选择**的问题

> 上述这些问题，可以被划分到「网络层」
> 
> 解决了（物理层 & 数据链路层 & 网络层）所面临的这些问题，我们就达到了让分组在网络间进行传输的目的

---

> 但对于计算机网络应用而言，这依然不够，如下

- 假设一台主机中运行着 2 个与网络通信相关的应用进程；一台服务器中运行着与网络通信相关的进程

- 当某个时刻，该主机收到了来自该服务器的分组，那这些分组应该交给哪个应用进程处理呢 ？

<img src="https://gitee.com/pj-l/imgs-1/raw/master/image-20220306171155934.png" alt="image-20220306171155934" style="zoom:50%;" />

- 这就引出了**如何标识与网络通信相关的应用进程，解决进程之间基于网络的通信**的问题

- 另外，**如果某个分组在传输过程中出现了误码，或由于路由器繁忙，导致路由器主动丢弃分组，应该如何处理呢 ？**

<img src="https://gitee.com/pj-l/imgs-1/raw/master/image-20220306171852285.png" alt="image-20220306171852285" style="zoom:50%;" />

> 上述这些问题，可以被划分到「运输层」
> 
> 解决了（物理层 & 数据链路层 & 网络层 & 运输层）所面临的这些问题，我们就可以实现进程之间基于网络的通信

---

> 然后，我们只需制定各种应用层协议，并按照协议标准开发相应的应用程序，通过应用进程间的交互来完成特定的网络应用

- 例如：

	- 支持万维网应用的 HTTP 协议

	- 支持电子邮件的 SMTP 协议

	- 支持文件传送的 FTP 协议

	- ...

> 上述这些问题，可以被划分到「应用层」
> 
> 至此，计算机网络所面临的主要问题都已经交代清楚，划分的 5 层原理体系结构小结如下

![image-20220305162726514](https://gitee.com/pj-l/imgs-1/raw/master/image-20220305162726514.png)

##### 常见的计算机网络体系结构

![image-20220305115233228](https://gitee.com/pj-l/imgs-1/raw/master/image-20220305115233228.png)

##### 计算机网络体系结构分层思想举例

##### 计算机网络体系结构中的专用术语
