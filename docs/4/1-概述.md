#### 实现网络层，需要解决哪些问题呢 ？

##### 问题 1：网络层应向其上层（运输层）提供“可靠传输服务”还是“不可靠传输服务 ？

- 所谓可靠传输：就是指网络层会对（误码、丢包、失序、重复）进行处理，确保接收方能正确地接收到发送方所发送的数据包

- 所谓不可靠传输：就是指对于（误码、丢包、失序、重复）的情况，网络层不用管

- 另外：网络体系结构不同，所提供的服务也可能不同

  - eg：TCP/IP 体系结构的网际层，提供的是无连接、不可靠的数据报服务

  - eg：ATM、帧中继、X.25 的网络层，提供的是面向连接、可靠的虚电路服务

##### 问题 2：网络层使用什么玩意儿进行寻址 ？

- 对于 TCP/IP 体系结构，使用 IP 地址进行网络层寻址

- 下图标注了网络 N1 上两个路由器接口各自所分配的 IP 地址

  - 它们的前 3 个数是相同的，可以看作它们所在网络的网络编号

  - 它们的第 4 个数不同，用于区分这两个路由器接口

    ![image-20220412114620756](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220412114620756.png)

- 下图标注了网络 N3 上两个路由器接口各自所分配的 IP 地址

  - 它们的前 2 个数是相同的，可以看作它们所在网络的网络编号

  - 它们的后 2 个数不同，用于区分这两个路由器接口

    ![image-20220412114850668](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220412114850668.png)

- 下图标注了网络 N7 上两个路由器接口各自所分配的 IP 地址

  - 它们的第 1 个数是相同的，可以看作它们所在网络的网络编号

  - 它们的后 3 个数不同，用于区分这两个路由器接口

    ![image-20220412115058578](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220412115058578.png)

##### 问题 3：路由选择

- 从源站到目的站，数据包往往有多条路径可选

  ![image-20220412115301744](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220412115301744.png)

- 那么：路由器收到数据包后，是依据什么来决定将数据包从自己的哪个接口转发出去的呢 ？

- 依据（数据包中的目的地址 & 路由器中的路由表）

  ![image-20220412115603980](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220412115603980.png)

#### 新的路由器中的路由表是如何建立起来的呢 ？

- 法一：由用户或网络管理员进行人工配置（只适用于网络拓扑结构不变的小规模互连网）

- 法二：实现各种路由选择协议 => 路由器执行其中规定的路由选择算法得出路由记录 => 写入路由表

#### 有了 IP 地址，还需要 MAC 地址吗 ？

![image-20220417213304894](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220417213304894.png)

---

![image-20220412120232618](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220412120232618.png)

（继续学习吧 ！）
