#### 网络层应解决的问题

##### 1、网络层应向其上层提供“可靠传输服务”还是“不可靠传输服务 ？

- 可靠：

  - 就是指网络层会对（误码、丢包、失序、重复）进行处理，确保接收方能正确地接收到发送方所发送的数据包

- 不可靠：

  - 就是指对于（误码、丢包、失序、重复）的情况，网络层不管

- 另外：网络体系结构不同，所提供的服务也可能不同

  - ATM、帧中继、X.25 的网络层，提供的是面向连接、可靠的虚电路服务

  - TCP/IP 体系结构的网际层，提供的是无连接、不可靠的数据报服务

##### 2、网络层使用什么玩意儿进行寻址 ？

> For TCP/IP，网络层使用 IP 地址进行寻址

- 下图标注了网络 N1 上两个路由器接口各自所分配的 IP 地址

  - 它们的前 3 个数是相同的，可以看作它们所在网络的网络编号

  - 它们的第 4 个数不同，用于区分这两个路由器接口

    ![image-20220412114620756](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220412114620756.png)

- 下图标注了网络 N3 上两个路由器接口各自所分配的 IP 地址

  - 它们的前 2 个数是相同的，可以看作它们所在网络的网络编号

  - 它们的后 2 个数不同，用于区分这两个路由器接口

    ![image-20220412114850668](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220412114850668.png)

- 下图标注了网络 N7 上两个路由器接口各自所分配的 IP 地址

  - 它们的第 1 个数是相同的，可以看作它们所在网络的网络编号

  - 它们的后 3 个数不同，用于区分这两个路由器接口

    ![image-20220412115058578](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220412115058578.png)

##### 3、路由选择问题

- 数据包从源站到目的站，往往有多条路径可选

  ![image-20220412115301744](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220412115301744.png)

- 那么：路由器收到数据包后，是依据什么来决定将数据包从自己的哪个接口转发出去呢 ？

- 依据（路由器中的路由表 & 数据包中的目的地址）

  ![image-20220412115603980](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220412115603980.png)

##### 4、一台新的路由器，其路由表是如何建立起来的 ？

- 方法 1：

  - 由用户或网络管理员手动进行配置

  - 这只适用于网络拓扑结构不变的小规模互连网

- 方法 2：

  - 实现各种路由选择协议 => 路由器执行其中规定的路由选择算法得出路由记录 => 写入路由表

#### 经典面试题：有了 IP 地址，还需要 MAC 地址吗 ？

- 当然需要，二者缺一不可

- 首先，主机的 IP 地址是可以动态变化的，而 MAC 地址是写死的，一般不能变（当然也有[随机 MAC 的手段](https://liupj.top/2022/03/26/knowledge/internet/mac-randomize/)）

- 其次：

  - 局域网内的高效通信用的是（交换机 + MAC地址）

  - 而连通不同网络，实现跨网络的高效通信是用的（路由器 + IP地址）

> 可以说：IP 的定位是区分网络，MAC 的定位是在局域网内区分主机
