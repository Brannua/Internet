
> MAC 地址不具备区分不同网络的功能，故网络层的 IP 地址应运而生

- IP 地址是因特网（Internet）上的（主机 & 路由器）所使用的地址，用于标识（网络编号 & 主机编号）

	- 网络编号：用于标识因特网上数以百万计的网络

	- 主机编号：用于标识同一网络上的（不同主机 & 路由器的各接口）

> Tips：
> 
> 如果只是一个单独的网络，不接入因特网，是可以只使用 MAC 地址的，但这并不是一般用户的常见应用方式
> 
> 如果主机所在的网络要接入因特网，则 MAC 地址和 IP 地址都需要使用

---

- 假设下图是因特网的一部分

- 我们给（网络 N8 上的两台主机 & 路由器 R4 连接该网络的接口）各分配一个 IP 地址

  - 这 3 个 IP 地址的前 3 个十进制数是相同的，都是网络 N8 的编号

  - 而最后一个十进制数各不相同，是网络 N8 上（各主机 & 路由器接口）的编号

<img src="https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220326121342898.png" alt="image-20220326121342898" style="zoom:50%;" />

> 即：同一网络上的（各主机 & 路由器各接口）的 IP 地址的网络号应相同，而主机号应不同

> 注意：
>
> 在 1 个 IP 地址中，哪部分是网络编号，哪部分是主机编号，并不都和上例相同（将在后续网络层章节详解）

#### 从网络体系结构看 MAC 地址与 IP 地址

![image-20220326151654853](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220326151654853.png)

- 以 5 层原理体系结构为例

---

- 应用层封装好的应用层报文，向下交付给运输层

---

- 运输层看不懂也无需看懂应用层报文的（结构 & 内容），我们用黑色表示，仅仅给其添加一个运输层首部

- 运输层将封装好的协议数据单元向下交付给网络层

---

- 网络层看不懂也无需看懂运输层协议数据单元的（结构 & 内容），我们用黑色表示，仅仅给其添加一个网络层首部

- 网络层将封装好的协议数据单元向下交付给数据链路层

---

- 数据链路层看不懂也无需看懂网络层协议数据单元的（结构 & 内容），我们用黑色表示，仅仅给其添加（一个数据链路层首部 & 一个数据链路层尾部）

- 数据链路层将封装好的协议数据单元向下交付给物理层

---

- 物理层看不懂也无需看懂数据链路层协议数据单元的（结构 & 内容）

- 仅仅将它们看作比特流，以便将它们转换为电信号发送到传输媒体

---

> 由于 IP 地址属于网络层，因此在网络层首部中应该封装有（源 IP 地址 & 目的 IP 地址）
> 
> 相应地，由于 MAC 地址属于数据链路层，因此在数据链路层首部中应该封装有（源 MAC 地址 & 目的 MAC 地址）

#### 从网络体系结构的角度，分析数据包转发过程中 MAC 地址与 IP 地址的变化情况

> 注意：
> 
> 由于我们关注的重点是：
> 
> 1. 网络层封装 IP 数据报时，（源 IP 地址、目的 IP 地址）应填什么
> 
> 2. 数据链路层封装帧时，（源 MAC 地址、目的 MAC 地址）应填什么
> 
> 因此：
> 
> 这里只需关注（网络层 & 数据链路层）就 ok，可以想象成（各网络层进行水平方向的逻辑通信 & 各数据链路层进行水平方向的逻辑通信）

- 为简单起见，下图各主机和各路由器接口的 IP 地址和 MAC 地址用简单的标识符来表示

- 假设主机 H1 要给主机 H2 发送一个数据包

![image-20220326161228240](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220326161228240.png)

---










#### 习题

![image-20220326161829932](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220326161829932.png)
