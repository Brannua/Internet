> CSMA/CA（`C`arrier `S`ense `M`ultiple `A`ccess / `C`ollision `A`voidance）
>
> 载波监听多址接入/碰撞避免

![image-20220322120905809](https://gitee.com/pj-l/imgs-1/raw/master/image-20220322120905809.png)

> 思考：
>
> 既然 CSMA/CD 协议已经成功地应用于使用广播信道的有线局域网
>
> 那么同样使用广播信道的无线局域网能否使用 CSMA/CD 协议呢 ？

![image-20220322171338032](https://gitee.com/pj-l/imgs-1/raw/master/image-20220322171338032.png)

- 如图所示，有 4 个无线站点

	- A 的信号范围可以覆盖到 B，但不能覆盖到 C

	- C 的信号范围可以覆盖到 B，但不能覆盖到 A

- 即：A 和 C 都检测不到对方的无线信号

<img src="https://gitee.com/pj-l/imgs-1/raw/master/image-20220322171617713.png" alt="image-20220322171617713" style="zoom:50%;" />

- 当 A 和 C 都要给 B 发送帧时，就会产生碰撞，但 A 和 C 无法检测到碰撞

> 这种未能检测出信道上其他站点信号的问题叫做「隐蔽站问题」，上图的 A 和 C 互为隐蔽站

- 而同样使用广播信道的有线局域网据不存在这样的问题，例如下图

- 总线上某个主机发送的信号，最多经过一个总线端到端传播时延，就会被总线上的各主机接收到

- 而总线上产生的碰撞信号，最多经过一个总线端到端往返传播时延，也会传遍总线

![image-20220322172119964](https://gitee.com/pj-l/imgs-1/raw/master/image-20220322172119964.png)

---

- 因此

	- 802.11 无线局域网使用 CSMA/CA 协议
		- 即：在 CSAM 的基础上，只实现 CA（碰撞避免），而不再实现 CD（碰撞检测）
		
	- 由于（不可能避免所有的碰撞 & 无线信道误码率较高）
	
		- 故 802.11 标准还使用了「数据链路层确认机制」，具体为停止等待协议，来确保数据被正确接收

---

- 802.11 无线局域网的 MAC 层标准定义了 2 种不同的媒体接入控制方式

	1. 分布式协调功能 DCF（`D`istributed `C`oordination `F`unction）

		- 这种方式没有中心控制站点，每个站点使用 CSMA/CA 协议通过争用信道来获取发送权，这是 802.11 定义的默认方式
	
	2. 点协调功能 PCF（`P`oint `C`oordination `F`unction）

		- 这种方式使用集中控制的接入算法（一般在接入点 AP 实现集中控制），这是 802.11 定义的可选方式，实际较少使用

---

- 802.11 标准规定

	- 所有站点都必须在持续检测到信道空闲一段指定时间后才能发送帧，这段时间被称为「帧间间隔 IFS（`I`nter`f`rame `s`pacing）」

- 帧间间隔的长度取决于站点要发送的帧的类型

  - 高优先级的帧需要等待的时间较短，因此可优先获得发送权

  - 低优先级的帧需要等待的时间较长

		- 若某个站的低优先级帧还没来得及发送，而其他站的高优先级帧已经发送到了信道上，则信道就变成了忙状态

		- 而低优先级帧就只能推迟发送，这样就减少了发生碰撞的机会

---

