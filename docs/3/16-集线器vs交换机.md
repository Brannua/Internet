#### 早期的「总线型以太网」

![image-20220326200244624](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220326200244624.png)

- 最初使用「粗同轴电缆」作为传输媒体

- 后来演进到使用价格相对便宜的「细同轴电缆」作为传输媒体

![image-20220326201108879](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220326201108879.png)

> 然而，这种使用（无源电缆 & 大量机械接头）的总线型以太网，并不像人们想象的那么可靠

#### 后来

- 在以太网领域，诞生了一种（使用大规模集成电路 & 可靠性高）的工作在物理层的设备，叫**集线器（HUB）**，且使用**双绞线**作为传输媒体

	- 集线器的每个接口仅是简单地转发比特，而不进行碰撞检测

	- 碰撞检测的任务由各站的网卡负责

	- 集线器一般都有少量的（容错能力 & 网络管理功能）

		- eg：若网络中某个网卡出现了故障，不停地发送帧，集线器是可以检测到这个问题的；并且会在内部断开与出故障网卡的连线，以保障整个以太网仍能正常工作

> 实践证明，相比于使用具有大量机械接头的无源电缆，使用双绞线和集线器不但价格更加便宜，而且使用起来也更加灵活方便，且稳定可靠 ！

---

- 举个例子，下图的以太网，使用集线器（HUB）和双绞线电缆互连了 4 台主机

- （主机中的以太网卡 & 集线器的各接口），使用 RJ-45 插座

- 双绞线电缆的两端是 RJ-45 插头，也就是俗称的“水晶头”

<img src="https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220326202028357.png" alt="image-20220326202028357" style="zoom:50%;" />

- 该以太网物理上是星型拓扑结构，但逻辑上：

	- 仍是一个总线网（信号广播），各站共享逻辑上的总线资源（争抢总线、可能碰撞），且使用的还是 CSMA/CD 协议（协调各主机）

- 因此：

	- 在分析问题时，我们可将集线器简单地看作一条总线

#### 使用集线器（HUB）可以在物理层扩展以太网

- 举例如下

- 假设某学院下设 3 个系，每个系都有一个（使用集线器作为互连设备的）以太网，这 3 个以太网相互独立，是 3 个独立的碰撞域（冲突域）

![image-20220326225400658](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220326225400658.png)

- 假如 1 系中的某台主机要给 1 系中的另一台主机发送数据帧，由于总线特性，故表示该数据帧的信号会被传输到 1 系中的其它各主机（广播）

- 假如 2 系中的多台主机同时发送数据帧，由于总线特性，这必然会导致信号碰撞，且碰撞后的信号会被传输到 2 系中的各主机

![image-20220326225817637](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220326225817637.png)

- 为了使各个系的以太网能相互通信，可再使用 1 个集线器，如下图

![image-20220326230000780](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220326230000780.png)

- 如此一来

	- 原本各自独立的 3 个以太网，就互连形成了 1 个更大的以太网

	- 原本各自独立的 3 个碰撞域，就合并形成了 1 个更大的碰撞域

> 即：形成了 1 个更大的逻辑上的总线型以太网

![image-20220326230230171](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220326230230171.png)

- 假如 1 系中的某台主机要给 2 系中的某台主机发送数据帧

	- 由于总线特性，表示该数据帧的信号会被传输到整个网络中的其它各个主机

	![image-20220326230433297](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220326230433297.png)

#### 后来

- 又诞生了更先进的网络互连设备 => 以太网交换机

#### 集线器 vs 以太网交换机

> 为简单起见，在这里，我们（1. 忽略 ARP 过程；2. 假设交换机的帧交换表已经“学习好了”）

- 举个例子

	- 使用集线器（HUB）互连而成的共享总线式以太网上的某台主机，要向该以太网上的另一台主机发送单播帧，则该单播帧会通过共享总线传输到总线上的其它各个主机

	- 而使用交换机（SWITCH）互连而成的交换式以太网上的某台主机，要向该以太网上的另一台主机发送单播帧，该单播帧进入交换机后，交换机会将该单播帧直接转发给目的主机

![image-20220326231303193](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220326231303193.png)

> 显然，交换机具有明显的优势

---

- 以太网交换机

	- 通常都有多个接口，每个接口都可以通过双绞线电缆，与其它（主机 || 以太网交换机）相连

	- 一般都工作在「全双工」方式（即：发送帧和接收帧可以同时进行）

- 而使用集线器的以太网

	- 在逻辑上共享总线，需要使用 CSMA/CD 协议来协调各主机争用总线

	- 只能工作在「半双工」模式（即：收发帧不能同时进行）

---

![image-20220326232538015](https://aliyun-oss-lpj.oss-cn-qingdao.aliyuncs.com/images/by-picgo/image-20220326232538015.png)

---

















